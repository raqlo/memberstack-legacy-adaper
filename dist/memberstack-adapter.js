var __defProp=Object.defineProperty,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__publicField=(e,t,o)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,o);!function(){"use strict";const e="ms2_enabled",t={adapter:{enabled:!0,currentVersion:"v1",importedMemberships:JSON.parse(void 0)},appIdV1:void 0,publicKey:void 0,appId:void 0,debug:!0};const o=window.memberstackConfig||{},r=(s=t,i=o,{...s,...i,adapter:{...s.adapter,...i.adapter}});var s,i;const n={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},a={silent:{level:-1},fatal:{level:n.fatal},error:{level:n.error},warn:{level:n.warn},log:{level:n.log},info:{level:n.info},success:{level:n.success},fail:{level:n.fail},ready:{level:n.info},start:{level:n.info},box:{level:n.info},debug:{level:n.debug},trace:{level:n.trace},verbose:{level:n.verbose}};function l(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function p(e,t,o=".",r){if(!l(t))return p(e,{},o);const s=Object.assign({},t);for(const i in e){if("__proto__"===i||"constructor"===i)continue;const t=e[i];null!=t&&(Array.isArray(t)&&Array.isArray(s[i])?s[i]=[...t,...s[i]]:l(t)&&l(s[i])?s[i]=p(t,s[i],(o?`${o}.`:"")+i.toString()):s[i]=t)}return s}const c=(...e)=>e.reduce(((e,t)=>p(e,t,"")),{});function d(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)&&(!(!e.message&&!e.args)&&!e.stack);var t}let u=!1;const m=[];class h{constructor(e={}){__publicField(this,"options"),__publicField(this,"_lastLog"),__publicField(this,"_mockFn");const t=e.types||a;this.options=c({...e,defaults:{...e.defaults},level:g(e.level,t),reporters:[...e.reporters||[]]},{types:a,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const o in t){const e={type:o,...this.options.defaults,...t[o]};this[o]=this._wrapLogFn(e),this[o].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=g(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){const t=new h({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const t=this.options.reporters.indexOf(e);if(-1!==t)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){u=!0}resumeLogs(){u=!1;const e=m.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){const t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(const o in this.options.types)this[o]=t(o,this.options.types[o])||this[o],this[o].raw=this[o]}_wrapLogFn(e,t){return(...o)=>{if(!u)return this._logFn(e,o,t);m.push([this,e,o,t])}}_logFn(e,t,o){if((e.level||0)>this.level)return!1;const r={date:new Date,args:[],...e,level:g(e.level,this.options.types)};!o&&1===t.length&&d(t[0])?Object.assign(r,t[0]):r.args=[...t],r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";const s=(e=!1)=>{const t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){const e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);const i=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,i<this.options.throttle)try{const e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin))return void(this._lastLog.timeout=setTimeout(s,this.options.throttle))}catch{}s(!0)}_log(e){for(const t of this.options.reporters)t.log(e,{options:this.options})}}function g(e,t={},o=3){return void 0===e?o:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:o}h.prototype.add=h.prototype.addReporter,h.prototype.remove=h.prototype.removeReporter,h.prototype.clear=h.prototype.removeReporter,h.prototype.withScope=h.prototype.withTag,h.prototype.mock=h.prototype.mockTypes,h.prototype.pause=h.prototype.pauseLogs,h.prototype.resume=h.prototype.resumeLogs;class _{constructor(e){__publicField(this,"options"),__publicField(this,"defaultColor"),__publicField(this,"levelColorMap"),__publicField(this,"typeColorMap"),this.options={...e},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(e){return e<1?console.__error||console.error:1===e?console.__warn||console.warn:console.__log||console.log}log(e){const t=this._getLogFn(e.level),o="log"===e.type?"":e.type,r=e.tag||"",s=`\n      background: ${this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,i=`%c${[r,o].filter(Boolean).join(":")}`;"string"==typeof e.args[0]?t(`${i}%c ${e.args[0]}`,s,"",...e.args.slice(1)):t(i,s,...e.args)}}const f=function(e={}){return function(e={}){return new h(e)}({reporters:e.reporters||[new _({})],prompt:(e,t={})=>"confirm"===t.type?Promise.resolve(confirm(e)):Promise.resolve(prompt(e)),...e})}();function w(e,t,...o){f.level=5,r.debug&&f[e](t,...o)}const b="adapter";function y(){return null!==localStorage.getItem("_ms-mid")}let v;function k(e){var t;const o=y()?JSON.parse(localStorage.getItem("_ms-mem")):null;e({email:(null==(t=null==o?void 0:o.auth)?void 0:t.email)||"",loggedIn:y(),getMetaData:async()=>{if(o){return(await window.$memberstackDom.getCurrentMember()).data.metaData||{}}return w("warn","[Adapter] getMetaData() called while member is not authenticated. Returning empty object."),{}},updateMetaData(e){var t;if(o)return null==(t=window.$memberstackDom)?void 0:t.updateMemberJSON({json:e});w("warn","[Adapter] updateMetaData() called while member is not authenticated. Returning empty object.")},updateProfile(e){var t;if(o)return null==(t=window.$memberstackDom)?void 0:t.updateMember({customFields:e});w("warn","[Adapter] updateProfile() called while member is not authenticated. Returning empty object.")},memberPage:void 0,membership:null})}async function S(){return v||(await new Promise((e=>{k((t=>{v=t,window.MemberStack.__resolveOnReady&&(window.MemberStack.__resolveOnReady(v),delete window.MemberStack.__resolveOnReady),e(t)}))})),v)}function M(e){const t=function(e){const t=(o=e,{reload:()=>{},logout:async()=>{await o.logout()},getToken:()=>o.getMemberCookie(),selectMembership:()=>{}});var o;return{onReady:S(),getToken:t.getToken,reload:t.reload,logout:t.logout,selectMembership:t.selectMembership}}(e);return Object.assign(window.MemberStack,t),new Proxy(window.MemberStack,{get(e,o){if(w("trace",`[Adapter] Proxying "${String(o)}" method...`),o in t)return t[o];w("warn",`[Adapter] Method "${String(o)}" not found in adapter.`)}})}function L(e,t){return window.memberstackConfig=window.memberstackConfig||t,new Promise(((o,r)=>{var s;const i=document.createElement("script");if(i.src=e,i.onload=()=>o(null),i.onerror=()=>{document.head.removeChild(i),r(new Error(`Failed to load ${e}`))},"v1"===(null==(s=t.adapter)?void 0:s.currentVersion)){document.head.appendChild(i).setAttribute("data-memberstack-id",t.appIdV1)}else document.head.appendChild(i)}))}!async function(){"v2"===function(){const t=new URLSearchParams(window.location.search),o=t.get(b),r=sessionStorage.getItem(e);return"true"===r?"v2":("true"===o&&(sessionStorage.setItem(e,"true"),t.delete(b),window.history.replaceState({},"",`${window.location.pathname}`),w("info","[Adapter] Adapter found. Setting session storage and cleaning up query params.")),"true"===r?"v2":"v1")}()?(w("info","[Adapter] V2 Adapter enabled."),document.cookie="__ms=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="__stripe_mid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="__stripe_sid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("memberstack"),w("info","[Adapter] V1 Session deleted"),function(){if(!window.MemberStack){let e;const t=new Promise((t=>{e=t}));window.MemberStack={onReady:t,__resolveOnReady:e}}}(),await async function(){w("start","[Adapter] starting legacy adapter...");try{window.$memberstackDom||await L("https://static.memberstack.com/scripts/v1/memberstack.js",r);const e=window.$memberstackDom;if(!e)throw"[Adapter] Failed to load Memberstack 2.0";window.MemberStack=M(e),w("trace","[Adapter] Legacy adapter enabled and injected.")}catch(e){e instanceof Error&&e.message?w("error",`${e.message}`,e):w("error",`[Adapter] Unknown error: ${e}`)}}()):(w("info","[Adapter] Adapter not enabled — using native Memberstack 1.0."),await L("https://api.memberstack.io/static/memberstack.js?webflow",r))}()}();
