var __defProp=Object.defineProperty,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField=(e,t,r)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,r);!function(){"use strict";const e="ms2_enabled";const t=window.memberstackConfig||{},r=(o={adapter:{enabled:!0,importedMemberships:{},loginUrl:void 0,forcedVersion:"v2"},appIdV1:void 0,publicKey:void 0,appId:void 0,debug:!0,logLevel:"warn"},n=t,{...o,...n,adapter:{...o.adapter,...n.adapter}});var o,n;const a={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},i={silent:{level:-1},fatal:{level:a.fatal},error:{level:a.error},warn:{level:a.warn},log:{level:a.log},info:{level:a.info},success:{level:a.success},fail:{level:a.fail},ready:{level:a.info},start:{level:a.info},box:{level:a.info},debug:{level:a.debug},trace:{level:a.trace},verbose:{level:a.verbose}};function s(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function l(e,t,r=".",o){if(!s(t))return l(e,{},r);const n=Object.assign({},t);for(const a in e){if("__proto__"===a||"constructor"===a)continue;const t=e[a];null!=t&&(Array.isArray(t)&&Array.isArray(n[a])?n[a]=[...t,...n[a]]:s(t)&&s(n[a])?n[a]=l(t,n[a],(r?`${r}.`:"")+a.toString()):n[a]=t)}return n}const d=(...e)=>e.reduce((e,t)=>l(e,t,""),{});function p(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)&&(!(!e.message&&!e.args)&&!e.stack);var t}let u=!1;const c=[];class m{constructor(e={}){__publicField(this,"options"),__publicField(this,"_lastLog"),__publicField(this,"_mockFn");const t=e.types||i;this.options=d({...e,defaults:{...e.defaults},level:g(e.level,t),reporters:[...e.reporters||[]]},{types:i,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const r in t){const e={type:r,...this.options.defaults,...t[r]};this[r]=this._wrapLogFn(e),this[r].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=g(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){const t=new m({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const t=this.options.reporters.indexOf(e);if(-1!==t)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){u=!0}resumeLogs(){u=!1;const e=c.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){const t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(const r in this.options.types)this[r]=t(r,this.options.types[r])||this[r],this[r].raw=this[r]}_wrapLogFn(e,t){return(...r)=>{if(!u)return this._logFn(e,r,t);c.push([this,e,r,t])}}_logFn(e,t,r){if((e.level||0)>this.level)return!1;const o={date:new Date,args:[],...e,level:g(e.level,this.options.types)};!r&&1===t.length&&p(t[0])?Object.assign(o,t[0]):o.args=[...t],o.message&&(o.args.unshift(o.message),delete o.message),o.additional&&(Array.isArray(o.additional)||(o.additional=o.additional.split("\n")),o.args.push("\n"+o.additional.join("\n")),delete o.additional),o.type="string"==typeof o.type?o.type.toLowerCase():"log",o.tag="string"==typeof o.tag?o.tag:"";const n=(e=!1)=>{const t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){const e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=o,this._log(o))};clearTimeout(this._lastLog.timeout);const a=this._lastLog.time&&o.date?o.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=o.date,a<this.options.throttle)try{const e=JSON.stringify([o.type,o.tag,o.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin))return void(this._lastLog.timeout=setTimeout(n,this.options.throttle))}catch{}n(!0)}_log(e){for(const t of this.options.reporters)t.log(e,{options:this.options})}}function g(e,t={},r=3){return void 0===e?r:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:r}m.prototype.add=m.prototype.addReporter,m.prototype.remove=m.prototype.removeReporter,m.prototype.clear=m.prototype.removeReporter,m.prototype.withScope=m.prototype.withTag,m.prototype.mock=m.prototype.mockTypes,m.prototype.pause=m.prototype.pauseLogs,m.prototype.resume=m.prototype.resumeLogs;class h{constructor(e){__publicField(this,"options"),__publicField(this,"defaultColor"),__publicField(this,"levelColorMap"),__publicField(this,"typeColorMap"),this.options={...e},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(e){return e<1?console.__error||console.error:1===e?console.__warn||console.warn:console.__log||console.log}log(e){const t=this._getLogFn(e.level),r="log"===e.type?"":e.type,o=e.tag||"",n=`\n      background: ${this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,a=`%c${[o,r].filter(Boolean).join(":")}`;"string"==typeof e.args[0]?t(`${a}%c ${e.args[0]}`,n,"",...e.args.slice(1)):t(a,n,...e.args)}}const f=function(e={}){return function(e={}){return new m(e)}({reporters:e.reporters||[new h({})],prompt:(e,t={})=>"confirm"===t.type?Promise.resolve(confirm(e)):Promise.resolve(prompt(e)),...e})}(),b={silent:0,fatal:0,error:1,warn:2,info:3,debug:4,trace:5,verbose:5};function A(e,t,...o){const n=r.logLevel||"info";f.level=b[n],(r.debug||function(e,t){const r=b[e];return r<=b[t]}(e,n))&&f[e](t,...o)}const w="adapter";function y(){return null!==localStorage.getItem("_ms-mid")}function $(){return y()?JSON.parse(localStorage.getItem("_ms-mem")):null}let v;async function _(){return v||(await new Promise(e=>{!function(e){var t;const r=$();e({email:(null==(t=null==r?void 0:r.auth)?void 0:t.email)||"",loggedIn:y(),getMetaData:async()=>r?(await window.$memberstackDom.getCurrentMember()).data.metaData||{}:(A("error","[Adapter] getMetaData() called while member is not authenticated. Returning empty object."),{}),updateMetaData(e){var t;if(r)return null==(t=window.$memberstackDom)?void 0:t.updateMemberJSON({json:e});A("error","[Adapter] updateMetaData() called while member is not authenticated. Returning empty object.")},updateProfile(e){var t;if(r)return null==(t=window.$memberstackDom)?void 0:t.updateMember({customFields:e});A("error","[Adapter] updateProfile() called while member is not authenticated. Returning empty object.")},memberPage:void 0,membership:null})}(t=>{v=t,window.MemberStack.__resolveOnReady&&(window.MemberStack.__resolveOnReady(v),delete window.MemberStack.__resolveOnReady),e(t)})}),v)}function S(e){const t=function(e){const t=(r=e,{reload:()=>{},logout:async()=>{await r.logout()},getToken:()=>r.getMemberCookie(),selectMembership:()=>{}});var r;return{onReady:_(),getToken:t.getToken,reload:t.reload,logout:t.logout,selectMembership:t.selectMembership}}(e);return Object.assign(window.MemberStack,t),new Proxy(window.MemberStack,{get(e,r){if(A("warn",`[Adapter] Proxying "${String(r)}" method...`),r in t)return t[r];A("error",`[Adapter] Method "${String(r)}" not found in adapter.`)}})}function k(e){return A("debug",`[Adapter] Getting plan attribute for ID: ${e}`),e.startsWith("prc_")?(A("debug",`[Adapter] ID "${e}" is a price ID, returning data-ms-price:update`),"data-ms-price:update"):e.startsWith("pln_")?(A("debug",`[Adapter] ID "${e}" is a plan ID, returning data-ms-plan:add`),"data-ms-plan:add"):(A("error",`[Adapter] Unknown ID format: "${e}" - expected prc_ or pln_ prefix`),null)}function L(e){A("debug","[Adapter] Processing data-ms-plan attributes");const t=document.querySelectorAll("[data-ms-plan]");return t.length&&(A("warn",`[Adapter] Found ${t.length} elements with data-ms-plan attribute`),t.forEach(t=>{const r=t.getAttribute("data-ms-plan");r&&function(e,t,r){var o;A("debug",`[Adapter] Replacing plan attribute for old ID: ${t}`);const n=null==(o=r.find(e=>e.oldId===t))?void 0:o.newId;if(!n)return void A("error",`[Adapter] Plan ID "${t}" not found in importedMemberships mapping`);const a=k(n);a?(e.removeAttribute("data-ms-plan"),e.setAttribute(a,n),A("debug",`[Adapter] Successfully replaced plan attribute: ${t} -> ${n} (${a})`)):A("error",`[Adapter] Invalid new plan ID format "${n}" for old ID "${t}"`)}(t,r,e)})),t.length}function R(e){A("debug","[Adapter] Processing data-ms-membership attributes");const t=document.querySelectorAll("[data-ms-membership]");return t.length&&(A("warn",`[Adapter] Found ${t.length} elements with data-ms-membership attribute`),t.forEach(t=>{const r=t.getAttribute("data-ms-membership");r&&function(e,t,r){var o;A("debug",`[Adapter] Replacing membership attribute for old ID: ${t}`);const n=null==(o=r.find(e=>e.oldId===t))?void 0:o.newId;if(!n)return void A("error",`[Adapter] Membership ID "${t}" not found in importedMemberships mapping`);const a=k(n);a?(e.removeAttribute("data-ms-membership"),e.setAttribute(a,n),"a"===e.tagName.toLowerCase()&&"#"===e.getAttribute("href")&&(e.setAttribute("data-ms-modal","signup"),A("debug",'[Adapter] Added data-ms-modal="signup" to link element')),A("debug",`[Adapter] Successfully replaced membership attribute: ${t} -> ${n} (${a})`)):A("error",`[Adapter] Invalid new membership ID format "${n}" for old ID "${t}"`)}(t,r,e)})),t.length}function I(e){A("debug","[Adapter] Processing hash-only signup URLs");const t=document.querySelectorAll('a[href^="#/ms/signup/"]');return t.length>0&&(A("warn",`[Adapter] Found ${t.length} elements with hash-only signup href attributes that will be converted to modal`),t.forEach(t=>{const r=t.getAttribute("href");if(r){const o=r.match(/#\/ms\/signup\/(.+)$/);if(o&&o[1]){!function(e,t,r){var o;A("debug",`[Adapter] Replacing signup href for extracted ID: ${t}`);const n=null==(o=r.find(e=>e.oldId===t))?void 0:o.newId;if(!n)return void A("error",`[Adapter] Signup href ID "${t}" not found in importedMemberships mapping`);const a=k(n);a?(e.setAttribute("href","#"),e.setAttribute("data-ms-modal","signup"),e.setAttribute(a,n),A("debug",`[Adapter] Successfully replaced signup href: ${t} -> ${n} with modal and ${a}`)):A("error",`[Adapter] Invalid new signup ID format "${n}" for old ID "${t}"`)}(t,o[1],e)}else A("error",`[Adapter] Failed to extract ID from href: ${r}`)}})),t.length}function F(){A("debug","[Adapter] Processing hash-only login URLs");const e=document.querySelectorAll('a[href="#/ms/login"]');return e.length>0&&(A("warn",`[Adapter] Found ${e.length} elements with login href attributes that will be converted to modal`),e.forEach(e=>{!function(e){A("debug","[Adapter] Replacing login href with modal"),e.setAttribute("href","#"),e.setAttribute("data-ms-modal","login"),A("debug","[Adapter] Successfully replaced login href with modal")}(e)})),e.length}function M(){A("debug","[Adapter] Processing hash-only profile URLs");const e=document.querySelectorAll('a[href="#/ms/profile"]');return e.length>0&&(A("warn",`[Adapter] Found ${e.length} elements with profile href attributes that will be converted to modal`),e.forEach(e=>{!function(e){A("debug","[Adapter] Replacing profile href with modal"),e.setAttribute("href","#"),e.setAttribute("data-ms-modal","profile"),A("debug","[Adapter] Successfully replaced profile href with modal")}(e)})),e.length}function D(e){A("debug","[Adapter] Processing URL hash signup URLs");const t=document.querySelectorAll('a[href*="#/ms/signup/"]'),r=Array.from(t).filter(e=>{const t=e.getAttribute("href");return t&&!t.startsWith("#")});return r.length>0&&(A("warn",`[Adapter] Found ${r.length} elements with URL hash signup href attributes that will be converted`),r.forEach(t=>{const r=t.getAttribute("href");if(r){const o=r.match(/^(.+)#\/ms\/signup\/(.+)$/);if(o&&o[1]&&o[2]){!function(e,t,r,o){var n;A("debug",`[Adapter] Replacing URL hash signup for base URL: ${t}, extracted ID: ${r}`);const a=null==(n=o.find(e=>e.oldId===r))?void 0:n.newId;if(!a)return void A("error",`[Adapter] URL hash signup ID "${r}" not found in importedMemberships mapping`);const i=k(a);i?(e.setAttribute("href",t),e.setAttribute(i,a),A("debug",`[Adapter] Successfully replaced URL hash signup: ${t}#/ms/signup/${r} -> ${t} with ${i}="${a}"`)):A("error",`[Adapter] Invalid new signup ID format "${a}" for old ID "${r}"`)}(t,o[1],o[2],e)}else A("error",`[Adapter] Failed to extract base URL and ID from href: ${r}`)}})),r.length}function U(e){A("debug",`Replacing logout attribute for element:${e.tagName}`),e.removeAttribute("data-ms-logout"),e.removeAttribute("ms-logout"),e.setAttribute("data-ms-action","logout")}function C(){A("debug","Starting attribute update process");const e=document.querySelectorAll("[data-ms-logout]");e.length>0&&(A("warn",`Found ${e.length} elements with deprecated data-ms-logout attribute`),e.forEach(e=>{U(e)}));const t=document.querySelectorAll("[ms-logout]");t.length>0&&(A("warn",`Found ${t.length} elements with deprecated ms-logout attribute`),t.forEach(e=>{U(e)}));const r=document.querySelectorAll("[ms-forgot]");r.length>0&&(A("warn",`Found ${r.length} elements with deprecated ms-forgot attribute`),r.forEach(e=>{!function(e){A("debug",`Replacing forgot password attribute for element:${e.tagName}`),e.removeAttribute("ms-forgot"),e.setAttribute("data-ms-modal","forgot-password")}(e)}));const o=document.querySelectorAll("[ms-login]");o.length>0&&(A("warn",`Found ${o.length} elements with deprecated ms-login attribute`),o.forEach(e=>{!function(e){A("debug",`Replacing login attribute for element:${e.tagName}`),e.removeAttribute("ms-login"),e.setAttribute("data-ms-modal","login")}(e)}));const n=document.querySelectorAll("[ms-signup]");n.length>0&&(A("warn",`Found ${n.length} elements with deprecated ms-signup attribute`),n.forEach(e=>{!function(e){A("debug",`Replacing signup attribute for element:${e.tagName}`),e.removeAttribute("ms-signup"),e.setAttribute("data-ms-modal","signup")}(e)}));const a=document.querySelectorAll('[data-ms-member="member-page"]');a.length>0&&(A("warn",`Found ${a.length} elements with deprecated data-ms-member="member-page" attribute`),a.forEach(e=>{!function(e){A("debug",`Replacing member-page attribute for element: ${e.tagName}`),e.removeAttribute("data-ms-member"),e.setAttribute("data-ms-action","login-redirect")}(e)}));A("debug",`Attribute update completed. Updated ${e.length+t.length+r.length+o.length+a.length} elements total`)}function P(e,t,r,o){if(A("trace",`[Adapter] Replacing membership attribute for property: ${t}`),!t.startsWith("membership."))return A("debug",`[Adapter] Skipping non-membership property: ${t}`),!1;if(!r.planConnections||0===r.planConnections.length)return A("error","[Adapter] No plan connections found in member data"),!1;const n=function(e,t,r){var o,n,a;if(A("debug",`[Adapter] Getting nested property "${t}" from plan item`),!e)return A("error","[Adapter] Plan item object is null/undefined"),"";let i="";return"membership.name"===t?(i=(null==(o=r.find(t=>t.newId===e.planId))?void 0:o.name)||" ",A("debug",`[Adapter] Mapped membership.name to planId: ${i}`)):"membership.amount"===t?(i=(null==(n=e.payment)?void 0:n.amount)?String(null==(a=e.payment)?void 0:a.amount):" ",A("debug",`[Adapter] Mapped membership.amount to payment.amount: ${i}`)):"membership.status"===t?(i=String(e.status).toLowerCase(),A("debug",`[Adapter] Mapped membership.status to status: ${i}`)):A("error",`[Adapter] Unknown property path: ${t}`),i}(r.planConnections[0],t,o);return n?(e.textContent=n,A("debug",`[Adapter] Set membership property "${t}" to "${n}" on ${e.tagName} element`),!0):(A("debug",`[Adapter] Empty value for membership property "${t}" - element content not updated`),!1)}function T(e,t){A("trace","[Adapter] Replacing signup date attribute");const r=function(e){if(A("debug","[Adapter] Formatting signup date"),!e.createdAt)return A("warn","[Adapter] No signup date found in member data"),"";try{const t=new Date(e.createdAt);if(isNaN(t.getTime()))return A("error",`[Adapter] Invalid signup date: ${e.createdAt}`),"";const r=new Intl.DateTimeFormat("en-US").format(t);return A("debug",`[Adapter] Formatted signup date: ${r}`),r}catch(t){return A("error",`[Adapter] Error formatting signup date: ${t}`),""}}(t);return r?(e.textContent=r,A("debug",`[Adapter] Set signup date to "${r}" on ${e.tagName} element`),!0):(A("debug","[Adapter] Could not format signup date - element content not updated"),!1)}function E({loginUrl:e,importMemberships:t}){A("trace","[Adapter] Starting all member updates process");const r=function(){A("debug","[Adapter] Starting rewrite attributes update process");const e=document.querySelectorAll("[data-ms-rewrite], [ms-rewrite]");if(0===e.length)return A("debug","[Adapter] No elements with data-ms-rewrite attribute found"),0;if(A("warn",`[Adapter] Found ${e.length} elements with data-ms-rewrite attribute`),!y())return A("debug","[Adapter] Member not authenticated, skipping rewrite attributes update"),0;let t=0;return e.forEach(e=>{const r=e.getAttribute("data-ms-rewrite")||e.getAttribute("ms-rewrite");r?(e.textContent=r,t++,A("debug",`[Adapter] Updated element content to: "${r}"`)):A("debug","[Adapter] Element has empty data-ms-rewrite attribute, skipping")}),A("info",`[Adapter] Rewrite attributes update completed. Updated ${t} elements`),t}(),o=function(e){if(!e)return A("debug","[Adapter] No login URL provided, skipping login URL to profile update"),0;if(A("info","[Adapter] Starting login URL to profile update process"),!y())return A("debug","[Adapter] Member not authenticated, skipping login URL updates"),0;const t=document.querySelectorAll(`a[href="${e}"]`);return 0===t.length?(A("debug",`[Adapter] No elements with login URL "${e}" found`),0):(A("warn",`[Adapter] Found ${t.length} elements with login URL that need profile URL update`),t.forEach(e=>{const t=e;t.href="/profile-page",A("debug",`[Adapter] Updated login URL to profile URL for ${t.tagName} element`)}),A("info",`[Adapter] Login URL to profile update completed. Updated ${t.length} elements`),t.length)}(e),n=function(e){if(A("trace","[Adapter] Starting member attributes update process"),!y())return A("debug","[Adapter] Member not authenticated with v2, skipping member attributes update"),0;const t=$();if(!t)return A("error","[Adapter] Failed to fetch member data"),0;A("debug",`[Adapter] Retrieved member data for member ID: ${t.id}`);let r=0;const o=document.querySelectorAll("[data-ms-member^='membership.']");o.length&&(A("warn",`[Adapter] Found ${o.length} elements with membership-related data-ms-member attributes`),o.forEach(o=>{const n=o.getAttribute("data-ms-member");n&&P(o,n,t,e)&&r++}));const n=document.querySelectorAll("[data-ms-member='signup-date.DateTimeFormat()']");return n.length&&(A("warn",`[Adapter] Found ${n.length} elements with signup-date.DateTimeFormat() attributes`),n.forEach(e=>{T(e,t)&&r++})),A("info",`[Adapter] Member attributes update completed. Processed ${r} elements`),r}(t);A("debug",`[Adapter] All member updates completed. Updated ${r+o+n} elements total`)}function j(){A("debug","[Adapter] Processing password reset URLs");const e=document.querySelectorAll('a[href="#/ms/password-reset"]');return e.length>0&&(A("warn",`[Adapter] Found ${e.length} elements with password reset href attributes that will be converted to modal`),e.forEach(e=>{!function(e){A("debug","[Adapter] Replacing password reset href with modal"),e.setAttribute("href","#"),e.setAttribute("data-ms-modal","forgot-password"),A("debug","[Adapter] Successfully replaced password reset href with modal")}(e)})),e.length}function N(){A("debug","[Adapter] Processing content URLs");const e=document.querySelectorAll('a[href*="#/ms/content/"]');return e.length>0&&(A("warn",`[Adapter] Found ${e.length} elements with content href attributes that will be converted to data-ms-content`),e.forEach(e=>{const t=e.getAttribute("href");if(t){const r=t.match(/^(.+)#\/ms\/content\/(.+)$/);if(r&&r[1]&&r[2]){!function(e,t,r){A("debug",`[Adapter] Replacing content href for type: ${r}`),e.setAttribute("href",t),e.setAttribute("data-ms-content",r),A("debug",`[Adapter] Successfully replaced content href: ${t}#/ms/content/${r} -> ${t} with data-ms-content="${r}"`)}(e,r[1],r[2])}else A("error",`[Adapter] Failed to extract content info from href: ${t}`)}})),e.length}function O(e,t,r){A("trace",`[Adapter] Transforming ${r} links`);const o=document.querySelectorAll(e);if(0===o.length)return A("debug",`[Adapter] No ${r} links found`),0;A("warn",`[Adapter] [Deprecated URL] Found ${o.length} ${r} links to transform`);let n=0;return o.forEach(e=>{const o=e,a=o.href;o.href="#",o.setAttribute("data-ms-action",t),A("debug",`[Adapter] Transformed ${r} link from "${a}" to ${t} action`),n++}),n}function q(){A("trace","[Adapter] Starting membership links transformation");const e=function(){A("trace","[Adapter] Starting login redirect links transformation");let e=0;return e+=O('a[href="#/ms/membership/redirect"]',"login-redirect","membership redirect"),e+=O('a[href="#/ms/member-page/default"]',"login-redirect","member page redirect"),e>0&&A("info",`[Adapter] Login redirect links transformation completed. Transformed ${e} links`),e}(),t=e+function(){A("trace","[Adapter] Starting logout links transformation");const e=O('a[href="#/ms/logout"]',"logout","logout");return e>0&&A("info",`[Adapter] Logout links transformation completed. Transformed ${e} links`),e}();return 0===t?A("debug","[Adapter] No membership links found to transform"):A("info",`[Adapter] All membership links transformation completed. Total transformed: ${t} links`),t}async function x(){document.addEventListener("DOMContentLoaded",()=>{!function(e=[]){A("trace","[Adapter] Starting plan attributes update process"),A("warn",`[Adapter] Working with ${Object.keys(e).length} imported memberships`);const t=L(e),r=R(e),o=I(e),n=F(),a=D(e);A("info",`[Adapter] Plan attributes update completed. Processed ${t+r+o+n+a+M()} elements total (${a} hash signup URLs logged`)}(r.adapter.importedMemberships),D(r.adapter.importedMemberships),C(),j(),N(),q()}),A("trace","[Adapter] starting legacy adapter...");try{window.$memberstackDom||await V("https://static.memberstack.com/scripts/v1/memberstack.js",r);const e=window.$memberstackDom;if(!e)throw"[Adapter] Failed to load Memberstack 2.0";window.MemberStack=S(e),E({importMemberships:r.adapter.importedMemberships,loginUrl:r.adapter.loginUrl}),function(){A("debug","[Adapter] Checking for profile modal(s) on page load");const e=document.querySelectorAll('[data-ms-modal="profile"], [ms-modal="profile"]');0!==e.length&&(y()||(A("warn",`[Adapter] ${e.length} profile modal(s) were hidden on this page`),e.forEach(e=>e.setAttribute("style","display: none"))))}(),function(){A("debug","[Adapter] Checking for login modal(s) on page load");const e=document.querySelectorAll('[data-ms-modal="login"], [ms-modal="login"]');0!==e.length&&y()&&(A("warn",`[Adapter] ${e.length} login modal(s) were hidden on this page`),e.forEach(e=>e.setAttribute("style","display: none")))}(),A("trace","[Adapter] 2.0 adapter enabled and injected.")}catch(e){e instanceof Error&&e.message?A("error",`${e.message}`,e):A("error",`[Adapter] Unknown error: ${e}`)}}function V(e,t){return window.memberstackConfig=window.memberstackConfig||t,new Promise((r,o)=>{var n;const a=document.createElement("script");if(a.src=e,a.onload=()=>r(null),a.onerror=()=>{document.head.removeChild(a),o(new Error(`Failed to load ${e}`))},"v1"===(null==(n=t.adapter)?void 0:n.currentVersion)){document.head.appendChild(a).setAttribute("data-memberstack-id",t.appIdV1)}else document.head.appendChild(a)})}!async function(){r.adapter.enabled?"v2"===function(t){var r;const o=new URLSearchParams(window.location.search),n=o.get(w),a=sessionStorage.getItem(e);let i;return n?(i="true"===n||"v2"===n?"v2":"v1",sessionStorage.setItem(e,i),A("trace",`[Adapter] Adapter version ${i} set via query params. Updating session storage and cleaning up query params.`),o.delete(w),window.history.replaceState({},"",`${window.location.pathname}${o.toString()?"?"+o.toString():""}`)):!a||"v1"!==a&&"v2"!==a?(null==(r=t.adapter)?void 0:r.forcedVersion)?(i=t.adapter.forcedVersion,A("trace",`[Adapter] Using forced version: ${t.adapter.forcedVersion}`)):i="v1":i=a,t.adapter.currentVersion=i,i}(r)?(A("start","[Adapter] V2 Adapter enabled."),document.cookie="__ms=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="__stripe_mid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="__stripe_sid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("memberstack"),A("info","[Adapter] V1 Session deleted"),function(){if(!window.MemberStack){let e;const t=new Promise(t=>{e=t});window.MemberStack={onReady:t,__resolveOnReady:e}}}(),await x()):(A("start","[Adapter] Adapter not enabled — using v1."),await V("https://api.memberstack.io/static/memberstack.js?webflow",r)):A("start","[Adapter] Adapter disabled.")}()}();
