var __defProp=Object.defineProperty,__defNormalProp=(t,e,o)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,__publicField=(t,e,o)=>__defNormalProp(t,"symbol"!=typeof e?e+"":e,o);!function(){"use strict";const t="ms2_enabled";const e=window.memberstackConfig||{},o=(r={adapter:{enabled:!0,importedMemberships:{}},appIdV1:void 0,publicKey:void 0,appId:void 0,debug:!0},s=e,{...r,...s,adapter:{...r.adapter,...s.adapter}});var r,s;const i={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},n={silent:{level:-1},fatal:{level:i.fatal},error:{level:i.error},warn:{level:i.warn},log:{level:i.log},info:{level:i.info},success:{level:i.success},fail:{level:i.fail},ready:{level:i.info},start:{level:i.info},box:{level:i.info},debug:{level:i.debug},trace:{level:i.trace},verbose:{level:i.verbose}};function a(t){if(null===t||"object"!=typeof t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&(!(Symbol.iterator in t)&&(!(Symbol.toStringTag in t)||"[object Module]"===Object.prototype.toString.call(t)))}function l(t,e,o=".",r){if(!a(e))return l(t,{},o);const s=Object.assign({},e);for(const i in t){if("__proto__"===i||"constructor"===i)continue;const e=t[i];null!=e&&(Array.isArray(e)&&Array.isArray(s[i])?s[i]=[...e,...s[i]]:a(e)&&a(s[i])?s[i]=l(e,s[i],(o?`${o}.`:"")+i.toString()):s[i]=e)}return s}const p=(...t)=>t.reduce((t,e)=>l(t,e,""),{});function c(t){return e=t,"[object Object]"===Object.prototype.toString.call(e)&&(!(!t.message&&!t.args)&&!t.stack);var e}let d=!1;const u=[];class m{constructor(t={}){__publicField(this,"options"),__publicField(this,"_lastLog"),__publicField(this,"_mockFn");const e=t.types||n;this.options=p({...t,defaults:{...t.defaults},level:h(t.level,e),reporters:[...t.reporters||[]]},{types:n,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const o in e){const t={type:o,...this.options.defaults,...e[o]};this[o]=this._wrapLogFn(t),this[o].raw=this._wrapLogFn(t,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=h(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){const e=new m({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){const e=this.options.reporters.indexOf(t);if(-1!==e)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(const t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=t=>{this[e].raw(String(t).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){d=!0}resumeLogs(){d=!1;const t=u.splice(0);for(const e of t)e[0]._logFn(e[1],e[2])}mockTypes(t){const e=t||this.options.mockFn;if(this._mockFn=e,"function"==typeof e)for(const o in this.options.types)this[o]=e(o,this.options.types[o])||this[o],this[o].raw=this[o]}_wrapLogFn(t,e){return(...o)=>{if(!d)return this._logFn(t,o,e);u.push([this,t,o,e])}}_logFn(t,e,o){if((t.level||0)>this.level)return!1;const r={date:new Date,args:[],...t,level:h(t.level,this.options.types)};!o&&1===e.length&&c(e[0])?Object.assign(r,e[0]):r.args=[...e],r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";const s=(t=!1)=>{const e=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&e>0){const t=[...this._lastLog.object.args];e>1&&t.push(`(repeated ${e} times)`),this._log({...this._lastLog.object,args:t}),this._lastLog.count=1}t&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);const i=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,i<this.options.throttle)try{const t=JSON.stringify([r.type,r.tag,r.args]),e=this._lastLog.serialized===t;if(this._lastLog.serialized=t,e&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin))return void(this._lastLog.timeout=setTimeout(s,this.options.throttle))}catch{}s(!0)}_log(t){for(const e of this.options.reporters)e.log(t,{options:this.options})}}function h(t,e={},o=3){return void 0===t?o:"number"==typeof t?t:e[t]&&void 0!==e[t].level?e[t].level:o}m.prototype.add=m.prototype.addReporter,m.prototype.remove=m.prototype.removeReporter,m.prototype.clear=m.prototype.removeReporter,m.prototype.withScope=m.prototype.withTag,m.prototype.mock=m.prototype.mockTypes,m.prototype.pause=m.prototype.pauseLogs,m.prototype.resume=m.prototype.resumeLogs;class g{constructor(t){__publicField(this,"options"),__publicField(this,"defaultColor"),__publicField(this,"levelColorMap"),__publicField(this,"typeColorMap"),this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:1===t?console.__warn||console.warn:console.__log||console.log}log(t){const e=this._getLogFn(t.level),o="log"===t.type?"":t.type,r=t.tag||"",s=`\n      background: ${this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,i=`%c${[r,o].filter(Boolean).join(":")}`;"string"==typeof t.args[0]?e(`${i}%c ${t.args[0]}`,s,"",...t.args.slice(1)):e(i,s,...t.args)}}const f=function(t={}){return function(t={}){return new m(t)}({reporters:t.reporters||[new g({})],prompt:(t,e={})=>"confirm"===e.type?Promise.resolve(confirm(t)):Promise.resolve(prompt(t)),...t})}();function b(t,e,...r){f.level=5,o.debug&&f[t](e,...r)}const _="adapter";function w(){return null!==localStorage.getItem("_ms-mid")}let v;function y(t){var e;const o=w()?JSON.parse(localStorage.getItem("_ms-mem")):null;t({email:(null==(e=null==o?void 0:o.auth)?void 0:e.email)||"",loggedIn:w(),getMetaData:async()=>{if(o){return(await window.$memberstackDom.getCurrentMember()).data.metaData||{}}return b("warn","[Adapter] getMetaData() called while member is not authenticated. Returning empty object."),{}},updateMetaData(t){var e;if(o)return null==(e=window.$memberstackDom)?void 0:e.updateMemberJSON({json:t});b("warn","[Adapter] updateMetaData() called while member is not authenticated. Returning empty object.")},updateProfile(t){var e;if(o)return null==(e=window.$memberstackDom)?void 0:e.updateMember({customFields:t});b("warn","[Adapter] updateProfile() called while member is not authenticated. Returning empty object.")},memberPage:void 0,membership:null})}async function A(){return v||(await new Promise(t=>{y(e=>{v=e,window.MemberStack.__resolveOnReady&&(window.MemberStack.__resolveOnReady(v),delete window.MemberStack.__resolveOnReady),t(e)})}),v)}function S(t){const e=function(t){const e=(o=t,{reload:()=>{},logout:async()=>{await o.logout()},getToken:()=>o.getMemberCookie(),selectMembership:()=>{}});var o;return{onReady:A(),getToken:e.getToken,reload:e.reload,logout:e.logout,selectMembership:e.selectMembership}}(t);return Object.assign(window.MemberStack,e),new Proxy(window.MemberStack,{get(t,o){if(b("trace",`[Adapter] Proxying "${String(o)}" method...`),o in e)return e[o];b("warn",`[Adapter] Method "${String(o)}" not found in adapter.`)}})}function k(t){return t.startsWith("prc_")?"data-ms-plan:price":t.startsWith("pln_")?"data-ms-plan:add":null}function M(t){document.querySelectorAll("[data-ms-plan]").forEach(e=>{const o=e.getAttribute("data-ms-plan");o&&function(t,e,o){const r=o[e];if(!r)return void b("error",`[Adapter] Plan ID "${e}" not found in importedMemberships mapping`);const s=k(r);s?(t.removeAttribute("data-ms-plan"),t.setAttribute(s,r)):b("error",`[Adapter] Invalid new plan ID format "${r}" for old ID "${e}"`)}(e,o,t),b("trace",`[Adapter] Replaced plan attribute "${o}" with "${e.getAttribute("data-ms-plan")}" on element "${e.outerHTML}"`)}),document.querySelectorAll("[data-ms-membership]").forEach(e=>{const o=e.getAttribute("data-ms-membership");o&&function(t,e,o){const r=o[e];if(!r)return void b("error",`[Adapter] Membership ID "${e}" not found in importedMemberships mapping`);const s=k(r);s?(t.removeAttribute("data-ms-membership"),t.setAttribute(s,r)):b("error",`[Adapter] Invalid new membership ID format "${r}" for old ID "${e}"`)}(e,o,t)}),document.querySelectorAll('a[href^="#/ms/signup/"]').forEach(e=>{const o=e.getAttribute("href");if(o){const r=o.match(/#\/ms\/signup\/(.+)$/);if(r&&r[1]){!function(t,e,o){const r=o[e];if(!r)return void b("error",`[Adapter] Signup href ID "${e}" not found in importedMemberships mapping`);const s=k(r);s?(t.setAttribute("href","#"),t.setAttribute("data-ms-modal","signup"),t.setAttribute(s,r),b("trace",`[Adapter] Replaced signup href with modal for ID "${e}" -> "${r}"`)):b("error",`[Adapter] Invalid new signup ID format "${r}" for old ID "${e}"`)}(e,r[1],t)}}})}function $(t){t.removeAttribute("data-ms-logout"),t.removeAttribute("ms-logout"),t.setAttribute("data-ms-action","logout")}async function L(){document.addEventListener("DOMContentLoaded",()=>{M(o.adapter.importedMemberships),document.querySelectorAll("[data-ms-logout]").forEach(t=>{$(t)}),document.querySelectorAll("[ms-logout]").forEach(t=>{$(t)})}),b("trace","[Adapter] starting legacy adapter...");try{window.$memberstackDom||await C("https://static.memberstack.com/scripts/v1/memberstack.js",o);const t=window.$memberstackDom;if(!t)throw"[Adapter] Failed to load Memberstack 2.0";window.MemberStack=S(t),b("trace","[Adapter] 2.0 adapter enabled and injected.")}catch(t){t instanceof Error&&t.message?b("error",`${t.message}`,t):b("error",`[Adapter] Unknown error: ${t}`)}}function C(t,e){return window.memberstackConfig=window.memberstackConfig||e,new Promise((o,r)=>{var s;const i=document.createElement("script");if(i.src=t,i.onload=()=>o(null),i.onerror=()=>{document.head.removeChild(i),r(new Error(`Failed to load ${t}`))},"v1"===(null==(s=e.adapter)?void 0:s.currentVersion)){document.head.appendChild(i).setAttribute("data-memberstack-id",e.appIdV1)}else document.head.appendChild(i)})}!async function(){o.adapter.enabled?"v2"===function(e){var o;const r=new URLSearchParams(window.location.search),s=r.get(_),i=sessionStorage.getItem(t);let n;return s?(n="true"===s||"v2"===s?"v2":"v1",sessionStorage.setItem(t,n),b("trace",`[Adapter] Adapter version ${n} set via query params. Updating session storage and cleaning up query params.`),r.delete(_),window.history.replaceState({},"",`${window.location.pathname}${r.toString()?"?"+r.toString():""}`)):!i||"v1"!==i&&"v2"!==i?(null==(o=e.adapter)?void 0:o.forcedVersion)?(n=e.adapter.forcedVersion,b("trace",`[Adapter] Using forced version: ${e.adapter.forcedVersion}`)):n="v1":n=i,e.adapter.currentVersion=n,n}(o)?(b("start","[Adapter] V2 Adapter enabled."),document.cookie="__ms=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="__stripe_mid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="__stripe_sid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("memberstack"),b("info","[Adapter] V1 Session deleted"),function(){if(!window.MemberStack){let t;const e=new Promise(e=>{t=e});window.MemberStack={onReady:e,__resolveOnReady:t}}}(),await L()):(b("start","[Adapter] Adapter not enabled — using native Memberstack 1.0."),await C("https://api.memberstack.io/static/memberstack.js?webflow",o)):b("start","[Adapter] Adapter disabled.")}()}();
